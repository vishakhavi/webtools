{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACO,IAAMA,MAAM,GAAG;EACpBC,YAAY,EAAE,cADM;EAEpBC,iBAAiB,EAAE,mBAFC;EAGpBC,iBAAiB,EAAE,mBAHC;EAIpBC,aAAa,EAAE,eAJK;EAKpBC,YAAY,EAAE,UALM,CAKM;;AALN,CAAf;AAQA,IAAMC,MAAM,GAAG;EACpBC,aAAa,EAAE,cADK;EAEpBC,UAAU,EAAE;AAFQ,CAAf;AAKA,IAAMC,QAAQ,+CAElBH,MAAM,CAACC,aAFW,EAEK,sDAFL,8BAIlBP,MAAM,CAACE,iBAJW,EAIS,kFAJT,8BAKlBF,MAAM,CAACG,iBALW,EAKS,wDALT,8BAMlBH,MAAM,CAACI,aANW,EAMK,6BANL,yCAOV,yCAPU,aAAd;;;;;;;;;;;;;;;;;;;;;ACnBP;AAOA;AASA;AAEO,SAASmB,iBAAT,OAGJ;EAAA,IAFCC,KAED,QAFCA,KAED;EAAA,IADCC,KACD,QADCA,KACD;EACC;EACAA,KAAK,CAACC,gBAAN,CAAuB,QAAvB,EAAiC,UAACC,CAAD,EAAO;IACpCA,CAAC,CAACC,cAAF;;IACA,IAAI,CAACD,CAAC,CAACE,MAAF,CAASC,SAAT,CAAmBC,QAAnB,CAA4B,aAA5B,CAAL,EAAiD;MAC7C;IACH;;IAED,IAAMC,QAAQ,GAAGP,KAAK,CAACQ,aAAN,CAAoB,kBAApB,EAAwCC,KAAzD;IACAnB,kDAAU;IACVO,mDAAM,CAAC;MACHE,KAAK,EAALA,KADG;MAEHC,KAAK,EAALA;IAFG,CAAD,CAAN,CARoC,CAWhC;;IACJf,qDAAU,CAACsB,QAAD,CAAV,CACKG,IADL,CACU,UAAAC,KAAK,EAAI;MACXlB,6CAAK,CAACc,QAAD,CAAL;MACAhB,+CAAO,CAACoB,KAAD,CAAP;MACAd,mDAAM,CAAC;QACHE,KAAK,EAALA,KADG;QAEHC,KAAK,EAALA;MAFG,CAAD,CAAN;IAIH,CARL,WASW,UAAAY,GAAG,EAAI;MACVpB,gDAAQ,CAAC,CAAAoB,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAGC,KAAN,KAAe,OAAhB,CAAR,CADU,CACwB;;MAClChB,mDAAM,CAAC;QACHE,KAAK,EAALA,KADG;QAEHC,KAAK,EAALA;MAFG,CAAD,CAAN;IAIH,CAfL;EAiBH,CA7BD;AA8BH;AAEM,SAASc,kBAAT,QAGJ;EAAA,IAFCf,KAED,SAFCA,KAED;EAAA,IADCC,KACD,SADCA,KACD;EACCA,KAAK,CAACC,gBAAN,CAAuB,OAAvB,EAAgC,UAACC,CAAD,EAAO;IACnC,IAAI,CAACA,CAAC,CAACE,MAAF,CAASC,SAAT,CAAmBC,QAAnB,CAA4B,kBAA5B,CAAL,EAAsD;MAClD;IACH;;IACDZ,8CAAM;IACNG,mDAAM,CAAC;MACHE,KAAK,EAALA,KADG;MAEHC,KAAK,EAALA;IAFG,CAAD,CAAN;IAIAd,sDAAW,GAAG;IAAH,SAAX,CACW,UAAA0B,GAAG,EAAI;MACVpB,gDAAQ,CAAC,CAAAoB,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAGC,KAAN,KAAe,OAAhB,CAAR,CADU,CACwB;;MAClChB,mDAAM,CAAC;QACHE,KAAK,EAALA,KADG;QAEHC,KAAK,EAALA;MAFG,CAAD,CAAN;IAIH,CAPL;EAQH,CAjBD;AAkBH;AAEM,SAASe,mBAAT,QAGJ;EAAA,IAFChB,KAED,SAFCA,KAED;EAAA,IADCC,KACD,SADCA,KACD;EACCA,KAAK,CAACC,gBAAN,CAAuB,OAAvB,EAAgC,UAACC,CAAD,EAAO;IACnC,IAAI,CAACA,CAAC,CAACE,MAAF,CAASC,SAAT,CAAmBC,QAAnB,CAA4B,mBAA5B,CAAL,EAAuD;MACnD;IACH;;IAEDhB,kDAAU,GALyB,CAKrB;;IACdO,mDAAM,CAAC;MACHE,KAAK,EAALA,KADG;MAEHC,KAAK,EAALA;IAFG,CAAD,CAAN;IAIAb,oDAAS,GACJuB,IADL,CACU,UAAAC,KAAK,EAAI;MACXpB,+CAAO,CAACoB,KAAD,CAAP;MACEtB,yDAAc,GACfqB,IADC,CACI,UAAAM,KAAK,EAAI;QACXpB,sDAAc,CAACoB,KAAD,CAAd;QACAnB,mDAAM,CAAC;UAAEE,KAAK,EAALA,KAAF;UAASC,KAAK,EAALA;QAAT,CAAD,CAAN;MACH,CAJC,WAKK,UAAAY,GAAG,EAAI;QACVpB,gDAAQ,CAAC,CAAAoB,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAGC,KAAN,KAAe,OAAhB,CAAR,CADU,CACwB;;QAClChB,mDAAM,CAAC;UAAEE,KAAK,EAALA,KAAF;UAASC,KAAK,EAALA;QAAT,CAAD,CAAN;MACH,CARC;IASL,CAZL,WAaW,UAAAY,GAAG,EAAI;MACVpB,gDAAQ,CAAC,CAAAoB,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAGC,KAAN,KAAe,OAAhB,CAAR,CADU,CACwB;;MAClChB,mDAAM,CAAC;QACHE,KAAK,EAALA,KADG;QAEHC,KAAK,EAALA;MAFG,CAAD,CAAN;IAIH,CAnBL;EAoBH,CA9BD;AA+BH;AAEM,SAASiB,sBAAT,QAGJ;EAAA,IAFClB,KAED,SAFCA,KAED;EAAA,IADCC,KACD,SADCA,KACD;EACCA,KAAK,CAACC,gBAAN,CAAuB,QAAvB,EAAiC,UAACC,CAAD,EAAO;IACpC,IAAI,CAACA,CAAC,CAACE,MAAF,CAASC,SAAT,CAAmBC,QAAnB,CAA4B,WAA5B,CAAL,EAA+C;MAC3C;IACH;;IACD,IAAMY,IAAI,GAAGlB,KAAK,CAACQ,aAAN,CAAoB,YAApB,EAAkCC,KAA/C,CAJoC,CAKpC;;IACArB,uDAAY,CAAC8B,IAAD,CAAZ,CACKR,IADL,CACU,UAAAS,IAAI,EAAI;MACV;MACA;MACApB,KAAK,CAACY,KAAN,GAAcQ,IAAd;MACA9B,yDAAc,GACTqB,IADL,CACU,UAAAM,KAAK,EAAI;QACXpB,sDAAc,CAACoB,KAAD,CAAd;QACAnB,mDAAM,CAAC;UAAEE,KAAK,EAALA,KAAF;UAASC,KAAK,EAALA;QAAT,CAAD,CAAN;MACH,CAJL,WAKW,UAAAY,GAAG,EAAI;QACVpB,gDAAQ,CAAC,CAAAoB,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAGC,KAAN,KAAe,OAAhB,CAAR,CADU,CACwB;;QAClChB,mDAAM,CAAC;UAAEE,KAAK,EAALA,KAAF;UAASC,KAAK,EAALA;QAAT,CAAD,CAAN;MACH,CARL;IAUH,CAfL,WAgBW,UAAAY,GAAG,EAAI;MACVpB,gDAAQ,CAAC,CAAAoB,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAGC,KAAN,KAAe,OAAhB,CAAR,CADU,CACwB;;MAClChB,mDAAM,CAAC;QAAEE,KAAK,EAALA,KAAF;QAASC,KAAK,EAALA;MAAT,CAAD,CAAN;IACH,CAnBL;EAoBH,CA1BD;AA2BH;AAEM,SAAUoB,YAAV,QAGJ;EAAA,IAFCrB,KAED,SAFCA,KAED;EAAA,IADCC,KACD,SADCA,KACD;EACCb,oDAAS,GACJuB,IADL,CACU,UAAAC,KAAK,EAAI;IACXpB,+CAAO,CAACoB,KAAD,CAAP;IACAtB,yDAAc,GACTqB,IADL,CACU,UAAAM,KAAK,EAAI;MACXpB,sDAAc,CAACoB,KAAD,CAAd;MACAnB,mDAAM,CAAC;QAAEE,KAAK,EAALA,KAAF;QAASC,KAAK,EAALA;MAAT,CAAD,CAAN;IACH,CAJL,WAKW,UAAAY,GAAG,EAAI;MACVpB,gDAAQ,CAAC,CAAAoB,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAGC,KAAN,KAAe,OAAhB,CAAR,CADU,CACwB;;MAClChB,mDAAM,CAAC;QAAEE,KAAK,EAALA,KAAF;QAASC,KAAK,EAALA;MAAT,CAAD,CAAN;IACH,CARL;EASH,CAZL,WAaW,UAAAY,GAAG,EAAI;IACVpB,gDAAQ,CAAC,CAAAoB,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAGC,KAAN,KAAe,OAAhB,CAAR,CADU,CACwB;;IAClChB,mDAAM,CAAC;MACHE,KAAK,EAALA,KADG;MAEHC,KAAK,EAALA;IAFG,CAAD,CAAN;EAIH,CAnBL;AAoBH;;;;;;;;;;;;;;AC7KD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASH,MAAT,OAAkC;EAAA,IAAhBE,KAAgB,QAAhBA,KAAgB;EAAA,IAATC,KAAS,QAATA,KAAS;EAC9B,IAAMqB,IAAI,0CAENC,kBAAkB,CAAEvB,KAAF,CAFZ,oBAGNwB,iBAAiB,CAAExB,KAAF,CAHX,oBAINyB,kBAAkB,CAAEzB,KAAF,CAJZ,oBAKN0B,mBAAmB,CAAE1B,KAAF,CALb,qBAAV;EAQAC,KAAK,CAAC0B,SAAN,GAAkBL,IAAlB;AACH;;AAED,SAASC,kBAAT,CAA4BvB,KAA5B,EAAmC;EAC/B,+CACwBA,KAAK,CAACc,KAD9B;AAGH;;AAED,SAASU,iBAAT,CAA2BxB,KAA3B,EAAkC;EAC9B,IAAIA,KAAK,CAAC4B,cAAV,EAA0B;IACtB;EAGH;;EACD,IAAI5B,KAAK,CAAC6B,UAAV,EAAsB;IAClB;EACH,CAR6B,CAU9B;EACA;;;EACA;AAWH;;AAED,SAASH,mBAAT,CAA6B1B,KAA7B,EAAoC;EAChC,IAAI,CAACA,KAAK,CAAC6B,UAAX,EAAuB;IACnB;EACH;;EACD,IAAI7B,KAAK,CAAC8B,aAAV,EAAyB;IACrB,0DAEEC,oBAAoB,CAAE/B,KAAF,CAFtB;EAMH;;EACD,0DAEM+B,oBAAoB,CAAE/B,KAAF,CAF1B,uBAGMgC,iBAAiB,CAAEhC,KAAF,CAHvB,uBAIMiC,mBAAmB,CAAEjC,KAAF,CAJzB;AAOH;;AAED,SAAS+B,oBAAT,CAA8B/B,KAA9B,EAAqC;EACjC;AAMH;;AAED,SAASgC,iBAAT,CAA2BhC,KAA3B,EAAkC;EAC9B,OAAO,iCAEH;EACA;EACAkC,MAAM,CAACC,MAAP,CAAcnC,KAAK,CAACY,KAApB,EAA2BwB,GAA3B,CAA+B,UAAAhB,IAAI;IAAA,wHAGQA,IAAI,CAACZ,QAHb,gEAGyEY,IAAI,CAACZ,QAH9E,yGAKJY,IAAI,CAACZ,QALD,8DAMHY,IAAI,CAACiB,IANF,2DAOHjB,IAAI,CAACD,IAPF;EAAA,CAAnC,EAWGmB,IAXH,CAWQ,EAXR,CAJG,WAAP;AAiBH;;AAED,SAASL,mBAAT,CAA6BjC,KAA7B,EAAoC;EAChC;AAMH;;AAED,SAASyB,kBAAT,CAA4BzB,KAA5B,EAAmC;EAE/B,IAAI,CAACA,KAAK,CAAC6B,UAAX,EAAuB;IACnB;EACH;;EAED,IAAMU,eAAe,GAAGvC,KAAK,CAACwC,WAAN,CAAkBC,MAAlB,CAAyB,UAAAC,IAAI;IAAA,OAAIA,IAAI,KAAK1C,KAAK,CAACQ,QAAnB;EAAA,CAA7B,CAAxB;;EACA,IAAI+B,eAAe,CAACI,MAAhB,IAA0B,CAA9B,EAAiC;IAC7B;EACH;;EACD,IAAMC,UAAU,mCAAhB;EACA,OAAOA,UAAU,4DAAV,GAKHV,MAAM,CAACC,MAAP,CAAcI,eAAd,EAA+BH,GAA/B,CAAmC,UAAA5B,QAAQ;IAAA,qCAEzCA,QAFyC;EAAA,CAA3C,EAIH8B,IAJG,CAIE,EAJF,CALG,UAAP,CAX+B,CAuB/B;AACH;;AAED,iEAAexC,MAAf;;;;;;;;;;;;;;;;;;;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAST,YAAT,CAAsB8B,IAAtB,EAA4B;EAC/B,OAAO0B,KAAK,CAAC,WAAD,EAAc;IAClBC,MAAM,EAAE,MADU;IAElBC,OAAO,EAAE,IAAIC,OAAJ,CAAY;MACjB,gBAAgB;IADC,CAAZ,CAFS;IAKlBC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;MAAEhC,IAAI,EAAJA;IAAF,CAAf;EALY,CAAd,CAAL,UAOI;IAAA,OAAMiC,OAAO,CAACC,MAAR,CAAe;MAAEvC,KAAK,EAAE;IAAT,CAAf,CAAN;EAAA,CAPJ,EAQFH,IARE,CAQG,UAAA2C,QAAQ,EAAI;IACd,IAAIA,QAAQ,CAACC,EAAb,EAAiB;MACb,OAAOD,QAAQ,CAACE,IAAT,EAAP;IACH;;IACD,OAAOF,QAAQ,CAACE,IAAT,YACI,UAAA1C,KAAK;MAAA,OAAIsC,OAAO,CAACC,MAAR,CAAe;QAAEvC,KAAK,EAALA;MAAF,CAAf,CAAJ;IAAA,CADT,EAEFH,IAFE,CAEG,UAAAE,GAAG;MAAA,OAAIuC,OAAO,CAACC,MAAR,CAAexC,GAAf,CAAJ;IAAA,CAFN,CAAP;EAGH,CAfE,CAAP;AAgBH;AAEM,SAASzB,SAAT,GAAqB;EACxB,OAAOyD,KAAK,CAAC,WAAD,CAAL,UACI;IAAA,OAAMO,OAAO,CAACC,MAAR,CAAe;MAAEvC,KAAK,EAAE;IAAT,CAAf,CAAN;EAAA,CADJ,EAEFH,IAFE,CAEG,UAAA2C,QAAQ,EAAI;IACd,IAAIA,QAAQ,CAACC,EAAb,EAAiB;MACb,OAAOD,QAAQ,CAACE,IAAT,EAAP;IACH;;IACD,OAAOF,QAAQ,CAACE,IAAT,YACI,UAAA1C,KAAK;MAAA,OAAIsC,OAAO,CAACC,MAAR,CAAe;QAAEvC,KAAK,EAALA;MAAF,CAAf,CAAJ;IAAA,CADT,EAEFH,IAFE,CAEG,UAAAE,GAAG;MAAA,OAAIuC,OAAO,CAACC,MAAR,CAAexC,GAAf,CAAJ;IAAA,CAFN,CAAP;EAGH,CATE,CAAP;AAUH;AAEM,SAAS4C,YAAT,GAAwB;EAC3B,OAAOZ,KAAK,CAAC,cAAD,EAAiB;IACrBC,MAAM,EAAE;EADa,CAAjB,CAAL,UAGI;IAAA,OAAMM,OAAO,CAACC,MAAR,CAAe;MAAEvC,KAAK,EAAE;IAAT,CAAf,CAAN;EAAA,CAHJ,EAIFH,IAJE,CAIG,UAAA2C,QAAQ,EAAI;IACd,IAAIA,QAAQ,CAACC,EAAb,EAAiB;MACb,OAAOD,QAAQ,CAACE,IAAT,EAAP;IACH;;IACD,OAAOF,QAAQ,CAACE,IAAT,YACI,UAAA1C,KAAK;MAAA,OAAIsC,OAAO,CAACC,MAAR,CAAe;QAAEvC,KAAK,EAALA;MAAF,CAAf,CAAJ;IAAA,CADT,EAEFH,IAFE,CAEG,UAAAE,GAAG;MAAA,OAAIuC,OAAO,CAACC,MAAR,CAAexC,GAAf,CAAJ;IAAA,CAFN,CAAP;EAGH,CAXE,CAAP;AAYH;AAEM,SAAS1B,WAAT,GAAuB;EAC1B,OAAO0D,KAAK,CAAC,cAAD,EAAiB;IACrBC,MAAM,EAAE;EADa,CAAjB,CAAL,UAGI;IAAA,OAAMM,OAAO,CAACC,MAAR,CAAe;MAAEvC,KAAK,EAAE;IAAT,CAAf,CAAN;EAAA,CAHJ,EAIFH,IAJE,CAIG,UAAA2C,QAAQ,EAAI;IACd,IAAIA,QAAQ,CAACC,EAAb,EAAiB;MACb,OAAOD,QAAQ,CAACE,IAAT,EAAP;IACH;;IACD,OAAOF,QAAQ,CAACE,IAAT,YACI,UAAA1C,KAAK;MAAA,OAAIsC,OAAO,CAACC,MAAR,CAAe;QAAEvC,KAAK,EAALA;MAAF,CAAf,CAAJ;IAAA,CADT,EAEFH,IAFE,CAEG,UAAAE,GAAG;MAAA,OAAIuC,OAAO,CAACC,MAAR,CAAexC,GAAf,CAAJ;IAAA,CAFN,CAAP;EAGH,CAXE,CAAP;AAYH;AAEM,SAAS3B,UAAT,CAAoBsB,QAApB,EAA8B;EACjC,OAAOqC,KAAK,CAAC,cAAD,EAAiB;IACrBC,MAAM,EAAE,MADa;IAErBC,OAAO,EAAE,IAAIC,OAAJ,CAAY;MACjB,gBAAgB;IADC,CAAZ,CAFY;IAKrBC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;MAAE3C,QAAQ,EAARA;IAAF,CAAf;EALe,CAAjB,CAAL,UAOI;IAAA,OAAM4C,OAAO,CAACC,MAAR,CAAe;MAAEvC,KAAK,EAAE;IAAT,CAAf,CAAN;EAAA,CAPJ,EAQFH,IARE,CAQG,UAAA2C,QAAQ,EAAI;IACd,IAAIA,QAAQ,CAACC,EAAb,EAAiB;MACb,OAAOD,QAAQ,CAACE,IAAT,EAAP;IACH;;IACD,OAAOF,QAAQ,CAACE,IAAT,YACI,UAAA1C,KAAK;MAAA,OAAIsC,OAAO,CAACC,MAAR,CAAe;QAAEvC,KAAK,EAALA;MAAF,CAAf,CAAJ;IAAA,CADT,EAEFH,IAFE,CAEG,UAAAE,GAAG;MAAA,OAAIuC,OAAO,CAACC,MAAR,CAAexC,GAAf,CAAJ;IAAA,CAFN,CAAP;EAGH,CAfE,CAAP;AAgBH;AAEM,SAASvB,cAAT,GAA0B;EAC7B,OAAOuD,KAAK,CAAC,qBAAD,CAAL,UACI;IAAA,OAAMO,OAAO,CAACC,MAAR,CAAe;MAAEvC,KAAK,EAAE;IAAT,CAAf,CAAN;EAAA,CADJ,EAEFH,IAFE,CAEG,UAAA2C,QAAQ,EAAI;IACd,IAAIA,QAAQ,CAACC,EAAb,EAAiB;MACb,OAAOD,QAAQ,CAACE,IAAT,EAAP;IACH;;IACD,OAAOF,QAAQ,CAACE,IAAT,YACI,UAAA1C,KAAK;MAAA,OAAIsC,OAAO,CAACC,MAAR,CAAe;QAAEvC,KAAK,EAALA;MAAF,CAAf,CAAJ;IAAA,CADT,EAEFH,IAFE,CAEG,UAAAE,GAAG;MAAA,OAAIuC,OAAO,CAACC,MAAR,CAAexC,GAAf,CAAJ;IAAA,CAFN,CAAP;EAGH,CATE,CAAP;AAUH;;;;;;;;;;;;;;;;;;;;;;;AChHD;AAEA,IAAMb,KAAK,GAAG;EACV;EACAY,KAAK,EAAE,EAFG;EAGViB,UAAU,EAAE,KAHF;EAIVD,cAAc,EAAE,IAJN;EAIY;EACtBE,aAAa,EAAE,KALL;EAMVtB,QAAQ,EAAE,EANA;EAOVkD,eAAe,EAAE,EAPP;EAQV5C,KAAK,EAAE,EARG;EASV0B,WAAW,EAAE;AATH,CAAd;AAYO,SAASmB,WAAT,GAAuB;EAC1B3D,KAAK,CAAC6B,UAAN,GAAmB,KAAnB;EACA7B,KAAK,CAAC4B,cAAN,GAAuB,IAAvB;EACA5B,KAAK,CAACQ,QAAN,GAAiB,EAAjB;EACAR,KAAK,CAACY,KAAN,GAAc,EAAd;EACAZ,KAAK,CAACc,KAAN,GAAc,EAAd;AACH;AAEM,SAASpB,KAAT,CAAec,QAAf,EAAyB;EAC5BR,KAAK,CAAC6B,UAAN,GAAmB,IAAnB;EACA7B,KAAK,CAAC4B,cAAN,GAAuB,KAAvB;EACA5B,KAAK,CAACQ,QAAN,GAAiBA,QAAjB;EACAR,KAAK,CAACc,KAAN,GAAc,EAAd;EACAd,KAAK,CAAC0D,eAAN,GAAwB,EAAxB;AACH;AAEM,SAAS/D,MAAT,GAAkB;EACrBK,KAAK,CAAC6B,UAAN,GAAmB,KAAnB;EACA7B,KAAK,CAAC4B,cAAN,GAAuB,KAAvB;EACA5B,KAAK,CAACQ,QAAN,GAAiB,EAAjB;EACAR,KAAK,CAACY,KAAN,GAAc,EAAd;EACAZ,KAAK,CAACc,KAAN,GAAc,EAAd;AACH;AAEM,SAASvB,UAAT,GAAsB;EACzBS,KAAK,CAACY,KAAN,GAAc,EAAd;EACAZ,KAAK,CAAC8B,aAAN,GAAsB,IAAtB;EACA9B,KAAK,CAACc,KAAN,GAAc,EAAd;AACH;AAEM,SAAStB,OAAT,CAAiBoB,KAAjB,EAAwB;EAC3BZ,KAAK,CAACY,KAAN,GAAcA,KAAd;EACAZ,KAAK,CAAC8B,aAAN,GAAsB,KAAtB;EACA9B,KAAK,CAACc,KAAN,GAAc,EAAd;EACAd,KAAK,CAAC0D,eAAN,GAAwB,EAAxB;AACH;AAEM,SAAS9D,OAAT,OAA+B;EAAA,IAAZgE,EAAY,QAAZA,EAAY;EAAA,IAARxC,IAAQ,QAARA,IAAQ;EAClCpB,KAAK,CAACY,KAAN,CAAYgD,EAAZ,IAAkBxC,IAAlB;EACApB,KAAK,CAAC0D,eAAN,GAAwBE,EAAxB;EACA5D,KAAK,CAACc,KAAN,GAAc,EAAd;AACH;AAEM,SAASjB,cAAT,CAAwBoB,KAAxB,EAA+B;EAClCjB,KAAK,CAACwC,WAAN,GAAoBvB,KAApB;AACH;AAEM,SAASxB,QAAT,CAAkBqB,KAAlB,EAAyB;EAC5B+C,OAAO,CAACC,GAAR,CAAYhD,KAAZ;;EACA,IAAI,CAACA,KAAL,EAAY;IACRd,KAAK,CAACc,KAAN,GAAc,EAAd;IACA;EACH;;EACDd,KAAK,CAACc,KAAN,GAAc7B,gDAAQ,CAAC6B,KAAD,CAAR,IAAmB7B,2DAAjC;AACH;AAED,iEAAee,KAAf;;;;;;UCtEA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;ACNA;AACA;AAMA;AAIA;AACA;AASA,IAAMC,KAAK,GAAG8D,QAAQ,CAACtD,aAAT,CAAuB,WAAvB,CAAd;AACAX,mDAAM,CAAC;EAAEE,KAAK,EAALA,8CAAF;EAASC,KAAK,EAALA;AAAT,CAAD,CAAN;AACAF,6DAAiB,CAAC;EAAEC,KAAK,EAALA,8CAAF;EAASC,KAAK,EAALA;AAAT,CAAD,CAAjB;AACAc,8DAAkB,CAAC;EAAEf,KAAK,EAALA,8CAAF;EAASC,KAAK,EAALA;AAAT,CAAD,CAAlB;AACAe,+DAAmB,CAAC;EAAEhB,KAAK,EAALA,8CAAF;EAASC,KAAK,EAALA;AAAT,CAAD,CAAnB;AACAiB,kEAAsB,CAAC;EAAElB,KAAK,EAALA,8CAAF;EAASC,KAAK,EAALA;AAAT,CAAD,CAAtB;AACA+D,WAAW,CAAC,YAAM;EAChB3C,wDAAY,CAAC;IAAErB,KAAK,EAALA,8CAAF;IAASC,KAAK,EAALA;EAAT,CAAD,CAAZ;AACD,CAFU,EAER,MAFQ,CAAX;AAKAgE,eAAe,IAEf;;AAEA,SAASA,eAAT,GAA2B;EACvBR,uDAAY,GACP9C,IADL,CACU,UAAAuD,OAAO,EAAI;IAAE;IACfxE,6CAAK,CAACwE,OAAO,CAAC1D,QAAT,CAAL,CADa,CACY;;IACzBV,mDAAM,CAAC;MAAEE,KAAK,EAALA,8CAAF;MAASC,KAAK,EAALA;IAAT,CAAD,CAAN,CAFa,CAEa;;IAC1B,OAAOb,oDAAS,EAAhB,CAHa,CAGO;EACvB,CALL,WAMW,UAAAyB,GAAG,EAAI;IACV,IAAI,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAGC,KAAN,MAAgBtC,2DAApB,EAAyC;MACrC,OAAO4E,OAAO,CAACC,MAAR,CAAe;QAAEvC,KAAK,EAAEhC,yDAAiBE;MAA1B,CAAf,CAAP,CADqC,CACe;IACvD;;IACD,OAAOoE,OAAO,CAACC,MAAR,CAAexC,GAAf,CAAP,CAJU,CAIkB;EAC/B,CAXL,EAYKF,IAZL,CAYU,UAAAC,KAAK,EAAI;IACXpB,+CAAO,CAACoB,KAAD,CAAP;IACAd,mDAAM,CAAC;MAAEE,KAAK,EAALA,8CAAF;MAASC,KAAK,EAALA;IAAT,CAAD,CAAN;EACH,CAfL,WAgBW,UAAAY,GAAG,EAAI;IACV,IAAI,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAGC,KAAN,KAAehC,yDAAnB,EAAsC;MAAE;MACpCa,8CAAM,GAD4B,CACxB;;MACVG,mDAAM,CAAC;QAAEE,KAAK,EAALA,8CAAF;QAASC,KAAK,EAALA;MAAT,CAAD,CAAN;MACA;IACH,CALS,CAMV;;;IACAR,gDAAQ,CAAC,CAAAoB,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAGC,KAAN,KAAe,OAAhB,CAAR,CAPU,CAOwB;;IAClChB,mDAAM,CAAC;MAAEE,KAAK,EAALA,8CAAF;MAASC,KAAK,EAALA;IAAT,CAAD,CAAN;EACH,CAzBL;AA0BH,C","sources":["webpack://js-chat/./src/constants.js","webpack://js-chat/./src/listeners.js","webpack://js-chat/./src/render.js","webpack://js-chat/./src/services.js","webpack://js-chat/./src/state.js","webpack://js-chat/webpack/bootstrap","webpack://js-chat/webpack/runtime/define property getters","webpack://js-chat/webpack/runtime/hasOwnProperty shorthand","webpack://js-chat/webpack/runtime/make namespace object","webpack://js-chat/./src/chat.js"],"sourcesContent":["// Constants benefits\r\n// - reduces risk of typos (IDE can code-complete)\r\n// - easier to confirm it is correct (easier to check properties than strings)\r\n// - If a value changes, you can change it in one place and the rest of the code can continue to use the constant\r\n\r\n// Might be SERVER_CODES and CLIENT_CODES if we had more and different constants\r\nexport const SERVER = {\r\n  AUTH_MISSING: 'auth-missing',\r\n  AUTH_INSUFFICIENT: 'auth-insufficient',\r\n  REQUIRED_USERNAME: 'required-username',\r\n  REQUIRED_TASK: 'required-task',\r\n  TASK_MISSING: 'noSuchId', // Someone was inconsistent!\r\n};\r\n\r\nexport const CLIENT = {\r\n  NETWORK_ERROR: 'networkError',\r\n  NO_SESSION: 'noSession',\r\n};\r\n\r\nexport const MESSAGES = {\r\n  // The [] below uses the variable value as the key\r\n  [CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network.  Please try again',\r\n  // Here we use 'dog' to simulate a bad password\r\n  [SERVER.AUTH_INSUFFICIENT]: 'Your username/password combination does not match any records, please try again.',\r\n  [SERVER.REQUIRED_USERNAME]: 'Please enter a valid (letters and/or numbers) username',\r\n  [SERVER.REQUIRED_TASK]: 'Please enter the task to do',\r\n  default: 'Something went wrong.  Please try again',\r\n};\r\n","import {\r\n    fetchLogin,\r\n    fetchLogout,\r\n    fetchChat,\r\n    fetchAddChat,\r\n    getOnlineUsers\r\n} from './services';\r\nimport {\r\n    waitOnChat,\r\n    setChat,\r\n    setError,\r\n    login,\r\n    logout,\r\n    addChat,\r\n    setOnlineUsers\r\n} from './state';\r\nimport render from './render';\r\n\r\nexport function addAbilityToLogin({\r\n    state,\r\n    appEl\r\n}) {\r\n    // Using 'submit' so we can get both submit via button-click and by \"enter\"\r\n    appEl.addEventListener('submit', (e) => {\r\n        e.preventDefault();\r\n        if (!e.target.classList.contains('login__form')) {\r\n            return;\r\n        }\r\n\r\n        const username = appEl.querySelector('.login__username').value;\r\n        waitOnChat();\r\n        render({\r\n            state,\r\n            appEl\r\n        }); // show loading state\r\n        fetchLogin(username)\r\n            .then(chats => {\r\n                login(username);\r\n                setChat(chats);\r\n                render({\r\n                    state,\r\n                    appEl\r\n                });\r\n            })\r\n            .catch(err => {\r\n                setError(err ?.error || 'ERROR'); // Ensure that the error ends up truthy\r\n                render({\r\n                    state,\r\n                    appEl\r\n                });\r\n            });\r\n\r\n    });\r\n}\r\n\r\nexport function addAbilityToLogout({\r\n    state,\r\n    appEl\r\n}) {\r\n    appEl.addEventListener('click', (e) => {\r\n        if (!e.target.classList.contains('controls__logout')) {\r\n            return;\r\n        }\r\n        logout();\r\n        render({\r\n            state,\r\n            appEl\r\n        });\r\n        fetchLogout() // We don't really care about results\r\n            .catch(err => {\r\n                setError(err ?.error || 'ERROR'); // Ensure that the error ends up truthy\r\n                render({\r\n                    state,\r\n                    appEl\r\n                });\r\n            });\r\n    });\r\n}\r\n\r\nexport function addAbilityToRefresh({\r\n    state,\r\n    appEl\r\n}) {\r\n    appEl.addEventListener('click', (e) => {\r\n        if (!e.target.classList.contains('controls__refresh')) {\r\n            return;\r\n        }\r\n\r\n        waitOnChat(); // Show loading state\r\n        render({\r\n            state,\r\n            appEl\r\n        });\r\n        fetchChat()\r\n            .then(chats => {\r\n                setChat(chats);\r\n                  getOnlineUsers()\r\n                .then(users => {\r\n                    setOnlineUsers(users);\r\n                    render({ state, appEl });\r\n                })\r\n                .catch(err => {\r\n                    setError(err ?.error || 'ERROR'); // Ensure that the error ends up truthy\r\n                    render({ state, appEl });\r\n                });\r\n            })\r\n            .catch(err => {\r\n                setError(err ?.error || 'ERROR'); // Ensure that the error ends up truthy\r\n                render({\r\n                    state,\r\n                    appEl\r\n                });\r\n            });\r\n    });\r\n}\r\n\r\nexport function addAbilityToAddMessage({\r\n    state,\r\n    appEl\r\n}) {\r\n    appEl.addEventListener('submit', (e) => {\r\n        if (!e.target.classList.contains('add__form')) {\r\n            return;\r\n        }\r\n        const text = appEl.querySelector('.add__task').value;\r\n        // Here I elect not show a waiting status...what impact could that have?\r\n        fetchAddChat(text)\r\n            .then(chat => {\r\n                // Notice we get the id of the new todo from the returned todo\r\n                //addChat({ id: chat.id, chat });\r\n                state.chats = chat;\r\n                getOnlineUsers()\r\n                    .then(users => {\r\n                        setOnlineUsers(users);\r\n                        render({ state, appEl });\r\n                    })\r\n                    .catch(err => {\r\n                        setError(err ?.error || 'ERROR'); // Ensure that the error ends up truthy\r\n                        render({ state, appEl });\r\n                    });\r\n\r\n            })\r\n            .catch(err => {\r\n                setError(err ?.error || 'ERROR'); // Ensure that the error ends up truthy\r\n                render({ state, appEl });\r\n            });\r\n    });\r\n}\r\n\r\nexport function  getPollChats({\r\n    state,\r\n    appEl\r\n}) {\r\n    fetchChat()\r\n        .then(chats => {\r\n            setChat(chats);\r\n            getOnlineUsers()\r\n                .then(users => {\r\n                    setOnlineUsers(users);\r\n                    render({ state, appEl });\r\n                })\r\n                .catch(err => {\r\n                    setError(err ?.error || 'ERROR'); // Ensure that the error ends up truthy\r\n                    render({ state, appEl });\r\n                });\r\n        })\r\n        .catch(err => {\r\n            setError(err ?.error || 'ERROR'); // Ensure that the error ends up truthy\r\n            render({\r\n                state,\r\n                appEl\r\n            });\r\n        });\r\n}","// Here we rebuild ALL the HTML whenever the state changes\r\n// That is not the most efficient way to do it\r\n// We COULD make these functions smarter about noticing what state changed\r\n// and what HTML is dependent on that state\r\n// and only replace the HTML that needs to be replaced\r\n// but we'll be moving to React soon where someone has already written that\r\n// The key part here is to see how the HTML is based on state\r\n// - at this stage, the \"action\" is not visible, only the state\r\n// - so our render is decoupled from the actions and events\r\nfunction render({ state, appEl }) {\r\n    const html = `\r\n   <main class=\"\">\r\n     ${ generateStatusHtml( state ) }\r\n     ${ generateLoginHtml( state ) }\r\n     ${ displayOnlineUSers( state ) }\r\n     ${ generateContentHtml( state ) }\r\n   </main>\r\n  `;\r\n    appEl.innerHTML = html;\r\n}\r\n\r\nfunction generateStatusHtml(state) {\r\n    return `\r\n      <div class=\"status\">${state.error}</div>\r\n  `;\r\n}\r\n\r\nfunction generateLoginHtml(state) {\r\n    if (state.isLoginPending) {\r\n        return `\r\n      <div class=\"login__waiting\">Loading user...</div>\r\n    `\r\n    }\r\n    if (state.isLoggedIn) {\r\n        return ``;\r\n    }\r\n\r\n    // The #/login below isn't \"real\" - the form should never navigate\r\n    // I included it merely as a hint to what the form does\r\n    return `\r\n      <div class=\"login\">\r\n        <form class=\"login__form\" action=\"#/login\">\r\n          <label>\r\n            <span>Username:</span>\r\n            <input class=\"login__username\" value=\"\">\r\n          </label>\r\n          <button class=\"login__button\" type=\"submit\">Login</button>\r\n        </form>\r\n      </div>\r\n  `;\r\n}\r\n\r\nfunction generateContentHtml(state) {\r\n    if (!state.isLoggedIn) {\r\n        return ``;\r\n    }\r\n    if (state.isChatPending) {\r\n        return `\r\n      <div class=\"content\">\r\n        ${generateControlsHtml( state )}\r\n        <div class=\"chat__waiting\">Loading Messages...</div>\r\n      </div>\r\n    `;\r\n    }\r\n    return `\r\n      <div class=\"content\">\r\n        ${generateControlsHtml( state )}\r\n        ${generateChatsHtml( state )}\r\n        ${generateAddChatHtml( state )}\r\n      </div>\r\n  `;\r\n}\r\n\r\nfunction generateControlsHtml(state) {\r\n    return `\r\n        <div class=\"controls\">\r\n          <button class=\"controls__refresh\">Refresh</button>\r\n          <button class=\"controls__logout\">Logout</button>\r\n        </div>\r\n  `;\r\n}\r\n\r\nfunction generateChatsHtml(state) {\r\n    return `\r\n   <ol class=\"messages\">` +\r\n        // Fill in\r\n        // Generate the HTML for the list of messages\r\n        Object.values(state.chats).map(chat => `\r\n        <li>\r\n          <div class=\"message\">\r\n              <img class=\"avatar\" alt=\"avatar of ${chat.username}\" src=\"https://avatars.dicebear.com/api/personas/${chat.username}.svg\"/>\r\n              <div class=\"sender-info\">\r\n              <span class=\"username\">${chat.username}</span>\r\n              <p class=\"message-time\">${chat.time}</p>\r\n              <p class=\"message-text\">${chat.text}</p>\r\n              </div>\r\n          </div>\r\n        </li>\r\n        `).join('') +\r\n        `</ol> `;\r\n}\r\n\r\nfunction generateAddChatHtml(state) {\r\n    return `\r\n        <form class=\"add__form\" action=\"#/add\">\r\n          <input class=\"add__task\">\r\n          <button type=\"submit\" class=\"add__button\">Send</button>\r\n        </form>\r\n  `;\r\n}\r\n\r\nfunction displayOnlineUSers(state) {\r\n\r\n    if (!state.isLoggedIn) {\r\n        return ``;\r\n    }\r\n\r\n    const onlineUsersName = state.onlineUsers.filter(user => user !== state.username);\r\n    if (onlineUsersName.length == 0) {\r\n        return `<p> No one is online`;\r\n    }\r\n    const onlineUser = `<h3> The online users are</h3>`\r\n    return onlineUser + `\r\n\r\n    <ul class=\"display-online-users\">\r\n    \r\n    ` +\r\n        Object.values(onlineUsersName).map(username => `\r\n    <li>\r\n        ${username}\r\n    </li>\r\n  `).join('') +\r\n        `</ul>`;\r\n\r\n    // return messagesHtml;\r\n}\r\n\r\nexport default render;","// Each of these functions is a bit repetitive\r\n// We COULD write a function that they each use to reduce that\r\n// But\r\n// (1) While these services all use the same structure, not all services will\r\n// (2) I wanted to demonstrate what was happening rather than abstract it away\r\n//     so that you will be able to write a different way to handle different services\r\n//\r\n// Key lesson: These functions all handle:\r\n// - MAKING the service calls\r\n// - Passing the data\r\n// - Parsing the results\r\n//\r\n// But these functions DO NOT\r\n// - change the state\r\n// - change the DOM\r\n//\r\n// This makes these functions fully decoupled and reuseable\r\n//\r\n// Notice they each return a promise. This is essential.\r\n// It allows the caller to attach reactions in then() and catch() clauses\r\nexport function fetchAddChat(text) {\r\n    return fetch('/api/chat', {\r\n            method: 'POST',\r\n            headers: new Headers({\r\n                'content-type': 'application/json',\r\n            }),\r\n            body: JSON.stringify({ text }),\r\n        })\r\n        .catch(() => Promise.reject({ error: 'networkError' }))\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            }\r\n            return response.json()\r\n                .catch(error => Promise.reject({ error }))\r\n                .then(err => Promise.reject(err));\r\n        });\r\n}\r\n\r\nexport function fetchChat() {\r\n    return fetch('/api/chat')\r\n        .catch(() => Promise.reject({ error: 'networkError' }))\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            }\r\n            return response.json()\r\n                .catch(error => Promise.reject({ error }))\r\n                .then(err => Promise.reject(err));\r\n        });\r\n}\r\n\r\nexport function fetchSession() {\r\n    return fetch('/api/session', {\r\n            method: 'GET',\r\n        })\r\n        .catch(() => Promise.reject({ error: 'networkError' }))\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            }\r\n            return response.json()\r\n                .catch(error => Promise.reject({ error }))\r\n                .then(err => Promise.reject(err));\r\n        });\r\n}\r\n\r\nexport function fetchLogout() {\r\n    return fetch('/api/session', {\r\n            method: 'DELETE',\r\n        })\r\n        .catch(() => Promise.reject({ error: 'networkError' }))\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            }\r\n            return response.json()\r\n                .catch(error => Promise.reject({ error }))\r\n                .then(err => Promise.reject(err));\r\n        });\r\n}\r\n\r\nexport function fetchLogin(username) {\r\n    return fetch('/api/session', {\r\n            method: 'POST',\r\n            headers: new Headers({\r\n                'content-type': 'application/json'\r\n            }),\r\n            body: JSON.stringify({ username }),\r\n        })\r\n        .catch(() => Promise.reject({ error: 'networkError' }))\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            }\r\n            return response.json()\r\n                .catch(error => Promise.reject({ error }))\r\n                .then(err => Promise.reject(err));\r\n        });\r\n}\r\n\r\nexport function getOnlineUsers() {\r\n    return fetch('/api/getOnlineUsers')\r\n        .catch(() => Promise.reject({ error: 'networkError' }))\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            }\r\n            return response.json()\r\n                .catch(error => Promise.reject({ error }))\r\n                .then(err => Promise.reject(err));\r\n        });\r\n}","import { MESSAGES } from './constants';\r\n\r\nconst state = {\r\n    // We store these as an object because we will access by id\r\n    chats: {},\r\n    isLoggedIn: false,\r\n    isLoginPending: true, // We start with our login status unknown\r\n    isChatPending: false,\r\n    username: '',\r\n    lastAddedTextId: '',\r\n    error: '',\r\n    onlineUsers: []\r\n};\r\n\r\nexport function waitOnLogin() {\r\n    state.isLoggedIn = false;\r\n    state.isLoginPending = true;\r\n    state.username = '';\r\n    state.chats = {};\r\n    state.error = '';\r\n}\r\n\r\nexport function login(username) {\r\n    state.isLoggedIn = true;\r\n    state.isLoginPending = false;\r\n    state.username = username;\r\n    state.error = '';\r\n    state.lastAddedTextId = '';\r\n}\r\n\r\nexport function logout() {\r\n    state.isLoggedIn = false;\r\n    state.isLoginPending = false;\r\n    state.username = '';\r\n    state.chats = {};\r\n    state.error = '';\r\n}\r\n\r\nexport function waitOnChat() {\r\n    state.chats = {};\r\n    state.isChatPending = true;\r\n    state.error = '';\r\n}\r\n\r\nexport function setChat(chats) {\r\n    state.chats = chats;\r\n    state.isChatPending = false;\r\n    state.error = '';\r\n    state.lastAddedTextId = '';\r\n}\r\n\r\nexport function addChat({ id, chat }) {\r\n    state.chats[id] = chat;\r\n    state.lastAddedTextId = id;\r\n    state.error = '';\r\n}\r\n\r\nexport function setOnlineUsers(users) {\r\n    state.onlineUsers = users;\r\n}\r\n\r\nexport function setError(error) {\r\n    console.log(error);\r\n    if (!error) {\r\n        state.error = '';\r\n        return;\r\n    }\r\n    state.error = MESSAGES[error] || MESSAGES.default;\r\n}\r\n\r\nexport default state;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { SERVER, CLIENT } from './constants';\r\nimport state, {\r\n    login,\r\n    logout,\r\n    setChat,\r\n    setError,\r\n} from './state';\r\nimport {\r\n    fetchChat,\r\n    fetchSession,\r\n} from './services';\r\nimport render from './render';\r\nimport {\r\n    addAbilityToLogin,\r\n    addAbilityToLogout,\r\n    addAbilityToRefresh,\r\n    addAbilityToAddMessage,\r\n    getPollChats\r\n} from './listeners';\r\n\r\n\r\nconst appEl = document.querySelector('#chat-app');\r\nrender({ state, appEl });\r\naddAbilityToLogin({ state, appEl });\r\naddAbilityToLogout({ state, appEl });\r\naddAbilityToRefresh({ state, appEl });\r\naddAbilityToAddMessage({ state, appEl });\r\nsetInterval(() => {\r\n  getPollChats({ state, appEl });\r\n}, \"5000\")\r\n\r\n\r\ncheckForSession();\r\n\r\n//////////\r\n\r\nfunction checkForSession() {\r\n    fetchSession()\r\n        .then(session => { // The returned object from the service call\r\n            login(session.username); // We do not have todos yet!\r\n            render({ state, appEl }); // Show we are logged in but don't have todos\r\n            return fetchChat(); // By returning this promise we can chain the original promise\r\n        })\r\n        .catch(err => {\r\n            if (err ?.error === SERVER.AUTH_MISSING) {\r\n                return Promise.reject({ error: CLIENT.NO_SESSION }) // Expected, not a problem\r\n            }\r\n            return Promise.reject(err); // Pass any other error unchanged\r\n        })\r\n        .then(chats => {\r\n            setChat(chats);\r\n            render({ state, appEl });\r\n        })\r\n        .catch(err => {\r\n            if (err ?.error == CLIENT.NO_SESSION) { // expected \"error\"\r\n                logout(); // No longer waiting, set to logged out case\r\n                render({ state, appEl });\r\n                return;\r\n            }\r\n            // For unexpected errors, report them\r\n            setError(err ?.error || 'ERROR'); // Ensure that the error ends up truthy\r\n            render({ state, appEl });\r\n        });\r\n}"],"names":["SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","REQUIRED_USERNAME","REQUIRED_TASK","TASK_MISSING","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","fetchLogin","fetchLogout","fetchChat","fetchAddChat","getOnlineUsers","waitOnChat","setChat","setError","login","logout","addChat","setOnlineUsers","render","addAbilityToLogin","state","appEl","addEventListener","e","preventDefault","target","classList","contains","username","querySelector","value","then","chats","err","error","addAbilityToLogout","addAbilityToRefresh","users","addAbilityToAddMessage","text","chat","getPollChats","html","generateStatusHtml","generateLoginHtml","displayOnlineUSers","generateContentHtml","innerHTML","isLoginPending","isLoggedIn","isChatPending","generateControlsHtml","generateChatsHtml","generateAddChatHtml","Object","values","map","time","join","onlineUsersName","onlineUsers","filter","user","length","onlineUser","fetch","method","headers","Headers","body","JSON","stringify","Promise","reject","response","ok","json","fetchSession","lastAddedTextId","waitOnLogin","id","console","log","document","setInterval","checkForSession","session"],"sourceRoot":""}